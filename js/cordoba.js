/*
* Cordoba (HTML) V2.0.4
* Copyright 2015, Limitless LLC
* www.limitless.company
*/

var windowHeight = $(window).height();
var windowWidth = $(window).width();
var settings;

settings = {
	enableAnimations: true,
	enableLoader: true,
	workItemsPerPage: 10,
	previewNavButtons : true,
	previewNavButtonNext : "Next",
	previewNavButtonPrev : "Prev",
	previewProtection: true,
};

function adjustSizes(){windowHeight=$(window).height(),windowWidth=$(window).width(),$(".fullscreen").css("height",windowHeight),$(".vertical-center").each(function(){$(this).css("margin-top",($(this).parent().height()-$(this).height())/2)});var e=$("section.work .stream");if(e.attr("data-item-height",300),windowWidth<767&&e.attr("data-item-height",200),windowWidth>767){$("section.page .background").css("height",windowHeight-117),$("section.page .content").css("height",windowHeight-210);var t=$("section.page .text").height()+$("section.page .info").height()+50;if($("section.page .content").height()<t)$("section.page .content").addClass("scroll");else{var i=$("section.page .content").height()-t;$("section.page .info").css("margin-top",i+10),$("section.page .content").addClass("no-scroll")}}else $("section.page .background").removeAttr("height"),$("section.page .content").removeAttr("height"),$("section.page .info").removeAttr("margin-top"),$("section.page .content").removeClass("scroll no-scroll");$(".work-preview .frame").css("height",windowHeight-$(".work-preview .nav").height()-$(".work-preview .info").height()-40),$(".work-preview img").css("margin-top",-($(".work-preview img").height()/2)),$(".work-preview .prev, .work-preview .next").css("top",(windowHeight-$(".work-preview .info").height())/2+40);var a=windowWidth/windowHeight;if(a>16/9){var o=windowWidth*(16/9);$("section.home video").css("width",windowWidth),$("section.home video").css("height",o);var s=($(".home video").height()-windowHeight)/2;$("section.home video").css("margin-top","-"+s+"px"),$("section.home video").css("margin-left","0px")}else{var o=windowHeight*(16/9);$("section.home video").css("height",windowHeight),$("section.home video").css("width",o);var s=($(".home video").width()-windowWidth)/2;$("section.home video").css("margin-top","0px"),$("section.home video").css("margin-left","-"+s+"px")}var r=(windowHeight-$(".home .flex-control-nav").height())/2;$(".home .flex-control-nav").css("top",r),$(".home .flex-prev").css("top",r-60),$(".home .flex-next").css("top",r+$(".home .flex-control-nav").height()+52)}function showPortfolio(){var e=$("section.work"),t=e.find(".stream");t.attr("data-width",t.width()),e.css("min-height",windowHeight);var i=e.find(".albums");if(!i.children("select").length){$("section.work .albums").append("<select></select>");var a=i.find("select");i.find("li").each(function(){var e=$(this).text(),t=$(this).attr("data-album");a.append($(this).hasClass("selected")?"<option data-album='"+t+"' selected>"+e+"</option>":"<option data-album='"+t+"'>"+e+"</option>")}),$("section.work .albums select").change(function(){var e=$(".work .albums select option:selected").attr("data-album");$(".work .albums li[data-album='"+e+"']").addClass("selected").siblings().removeClass("selected"),console.log(e),showPortfolio()})}var o=$(".work .albums li.selected").attr("data-album"),s=!0;currentAlbum==o?s=!1:currentAlbum=o,s&&t.find(".row").remove(),s&&t.find(".file").removeClass("visible active awake"),t.children(".file").each(function(){$(this).attr("data-album")==o?$(this).addClass("active"):$(this).removeClass("active selected")});var r=settings.workItemsPerPage,n=parseInt($(".stream").children(".awake").length),d=parseInt($(".stream").children(".active").length),l=n+r;if(l>d&&(l=d),n!=d){for(var c=n;l>c;c++){var h=$(".stream .active").eq(c),v=h.attr("data-album");v==o&&h.addClass("selected")}t.children(".selected").length>0&&(t.addClass("loading"),$("html, body").scrollTop(windowHeight));var w=0;$(".stream > .selected").each(function(){{var t=$(this),i=t.attr("data-type"),a=t.attr("data-source");$("<img />").attr("src",a).load(function(){if(this.complete&&"undefined"!=typeof this.naturalWidth&&0!=this.naturalWidth){var a=this.naturalHeight,o=this.src,s=this.naturalWidth;t.css("background-image","url("+o+")"),t.addClass("awake"),t.attr("data-width",s).attr("data-height",a),t.addClass(i)}else console.log("("+this.src+") is broken :'(");if(w+=1,w==$(".stream > .selected").length){var r=$(".stream"),n=r.children(".selected"),d=parseInt(r.attr("data-item-height")),l=0,c=r.attr("data-width"),h=0;0==r.find(".row").length&&r.append("<div class='row'></div>"),r.find(".row").length==r.find(".row.full").length?r.append("<div class='row'></div>"):r.find(".row").last().find(".file").each(function(){h+=parseInt($(this).attr("itemWidthRatio"))});var v=0;n.each(function(){var t=$(this),i=(t.attr("data-type"),t.attr("data-width")),a=t.attr("data-height"),o=d*(i/a),s=i/d*100;s-=l,t.attr("itemWidthRatio",o).css("width",s);var n=c/h;if(e.hasClass("grid")){var w=1.5;if(0==v&&(w=2),n>w&&c>479){t.removeClass("selected");var p=t[0].outerHTML;$(".stream .row").last().append(p),h+=o}else{h=o,t.removeClass("selected");var p=t[0].outerHTML;$(".stream .row").last().append(p);var m=0;$(".stream .row").last().find(".file").each(function(){m+=parseInt($(this).attr("itemWidthRatio"))});var f=m-c;c>m&&(f=c-m),$(".stream .row").last().find(".file").each(function(){var e=parseInt($(this).attr("itemWidthRatio")),t=f*(e/m),i=e-t;c>m&&(i=e+t);var a=i/c*100;$(this).css("width",a+"%"),$(this).attr("data-width-adapted",i)}),$(".stream .row").last().addClass("full"),r.append("<div class='row'></div>"),v+=1}}else{var w=0;if(e.hasClass("grid-trio"))var w=3;e.hasClass("grid-quad")&&(w=4);var g=$(".stream .row").last().find(".file").length;if(w>g&&c>479){t.removeClass("selected");var p=t[0].outerHTML;$(".stream .row").last().append(p)}else{$(".stream .row").last().addClass("full"),r.append("<div class='row'></div>"),v+=1,t.removeClass("selected");var p=t[0].outerHTML;$(".stream .row").last().append(p)}}}),r.removeClass("loading"),r.find(".row").each(function(){$(this).find("div").removeClass("awake active"),$(this).find("div").addClass("view");var e="<div class='overlay'></div>";$(this).find(".video").html(e),$(this).find(".youtube").html(e),$(this).find(".vimeo").html(e),0==$(this).find("div").length&&$(this).remove(),$(this).find(".file").click(function(){previewImage($(this))})}),$(document).scroll(function(){var e=$(this).scrollTop()+$(this).height();e>=windowHeight&&showPortfolio()})}})}})}}function previewImage(e){function t(){$(".work-preview .player").each(function(){var e=$(this).attr("data-type"),t=$(this).attr("data-url"),i=$(this).parent().width(),a=$(this).parent().height();if("youtube"===e){var o='<iframe width="'+i+'" height="'+a+'" src="//www.youtube.com/embed/'+t+'?rel=0" frameborder="0" allowfullscreen></iframe>';$(this).html(o)}else if("vimeo"===e){var o='<iframe src="//player.vimeo.com/video/'+t+'?autoplay=1;title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff" width="'+i+'" height="'+a+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';$(this).html(o)}})}function i(){var e=$.magnificPopup.instance;e.close()}function a(){if(h>0){h--;var e=$("section.work .stream .view").eq(h);img=e.attr("data-source"),n=e.attr("data-type"),file=e.attr("data-file"),l=e.attr("data-caption"),c=e.attr("data-album"),$(".work-preview .meta .picture-title").text(l),$(".work-preview .meta .album-title").text(c),"image"==n&&(s="<div class='frame' style='height:"+w+"px'><img src='"+img+"' alt='"+l+"'></div>"),("youtube"==n||"vimeo"==n||"soundcloud"==n)&&(s="<div class='frame' style='height:"+w+"px'><div class='player' data-type='"+n+"' data-file='"+file+"'></div></div>"),$(".work-preview .frame").replaceWith(s),"image"==n&&settings.previewProtection&&$(".work-preview .frame").append("<div class='protected'></div>"),("youtube"==n||"vimeo"==n||"soundcloud"==n)&&t(),$(".work-preview .meta .current").text(h+1+" / "+v),$(".work-preview .frame").css("height",windowHeight-$(".work-preview .nav").height()-$(".work-preview .info").height()-40),$(".work-preview img").css("margin-top",-($(".work-preview img").height()/2)),0==h&&$(".work-preview .nav .prev").addClass("disabled"),v>h&&$(".work-preview .nav .next").removeClass("disabled"),$(".work-preview .frame").on("swipeleft",function(){o()}),$(".work-preview .frame").on("swiperight",function(){a()})}}function o(){if(v-1>h){h++;var e=$("section.work .stream .view").eq(h);img=e.attr("data-source"),n=e.attr("data-type"),file=e.attr("data-file"),l=e.attr("data-caption"),c=e.attr("data-album"),$(".work-preview .meta .picture-title").text(l),$(".work-preview .meta .album-title").text(c),"image"==n&&(s="<div class='frame' style='height:"+w+"px'><img src='"+img+"' alt='"+l+"'></div>"),("youtube"==n||"vimeo"==n||"soundcloud"==n)&&(s="<div class='frame' style='height:"+w+"px'><div class='player' data-type='"+n+"' data-file='"+file+"'></div></div>"),$(".work-preview .frame").replaceWith(s),"image"==n&&settings.previewProtection&&$(".work-preview .frame").append("<div class='protected'></div>"),("youtube"==n||"vimeo"==n||"soundcloud"==n)&&t(),$(".work-preview .meta .current").text(h+1+" / "+v),$(".work-preview .frame").css("height",windowHeight-$(".work-preview .nav").height()-$(".work-preview .info").height()-40),$(".work-preview img").css("margin-top",-($(".work-preview img").height()/2)),0==!h&&$(".work-preview .nav .prev").removeClass("disabled"),h==v-1&&$(".work-preview .nav .next").addClass("disabled"),$(".work-preview .frame").on("swipeleft",function(){o()}),$(".work-preview .frame").on("swiperight",function(){a()})}}var s,e=e,r=e.attr("data-source"),n=e.attr("data-type"),d=e.attr("data-url"),l=e.attr("data-caption"),c=e.attr("data-album"),h=$("section.work .stream .view").index(e),v=$("section.work .stream .view").length,w=windowHeight-190,p=(windowHeight-100)/2+40,m="<div class='nav'></div>",f="<div class='info'><div class='meta'><span class='picture-title'>"+l+"</span><span class='album-title'>"+c+"</span><span class='current'>"+(h+1)+" / "+v+"</span></div><div class='close'></div></div>";"image"==n&&(s="<div class='frame' style='height:"+w+"px'><img src='"+r+"' alt='"+l+"'></div>"),("video"==n||"youtube"==n||"vimeo"==n||"soundcloud"==n)&&(s="<div class='frame' style='height:"+w+"px'><div class='player' data-type='"+n+"' data-url='"+d+"'></div></div>"),settings.previewNavButtons&&(m="<div class='nav'><div class='prev' style='top: "+p+"px;'>"+settings.previewNavButtonPrev+"</div><div class='next' style='top: "+p+"px;'>"+settings.previewNavButtonNext+"</div></div>"),$.magnificPopup.open({items:{src:"<div class='work-preview'>"+f+s+m+"</div>",type:"inline"}}),$(".work-preview .frame").css("height",windowHeight-$(".work-preview .nav").height()-$(".work-preview .info").height()-40),$(".work-preview .prev, .work-preview .next").css("top",(windowHeight-$(".work-preview .info").height())/2+40),0==h&&$(".work-preview .prev").addClass("disabled"),"image"==n&&settings.previewProtection&&$(".work-preview .frame").append("<div class='protected'></div>"),("youtube"==n||"vimeo"==n||"soundcloud"==n)&&t(),$(".work-preview img").css("margin-top",-($(".work-preview img").height()/2)),$(".work-preview .close").click(function(){i()}),$(".work-preview .prev").click(function(){a()}),$(".work-preview .next").click(function(){o()}),$(".work-preview .frame").on("swipeleft",function(){o()}),$(".work-preview .frame").on("swiperight",function(){a()}),$(document).keydown(function(e){var t=e.keyCode?e.keyCode:e.which;"37"==t&&a()}),$(document).keydown(function(e){var t=e.keyCode?e.keyCode:e.which;"39"==t&&o()})}function playLoader(){settings.enableLoader?($("body").append("<div class='loading'></div>"),$("body").children(".loading").delay(1e3).fadeOut(1e3,function(){$(".wrapper").animate({opacity:1},1e3),$("body").children(".loading").remove()})):$(".wrapper").css("opacity",1)}function playAnimations(){if(settings.enableAnimations){var e=2e3;$(".animated").each(function(){{var t=$(this);t.offset().top,windowHeight}t.css("opacity",0),setTimeout(function(){t.addClass("fadeInDown"),t.removeAttr("opacity")},e),e+=400})}}jQuery(document).ready(function(e){"use strict";e(".background.image").each(function(){{var t=e(this).attr("data-url");e(this).attr("data-type")}return void 0==t?!1:void e(this).css("background-image","url("+t+")")}),e(".background.video").each(function(){var t=e(this).attr("data-url"),i=e(this).attr("data-poster");if(void 0==t)return!1;var a="<video autoplay loop poster='"+i+"'><source src='"+t+"' type='video/mp4'></video>";e(this).html(a)}),e(".background").each(function(){e(this).hasClass("overlay-dark")&&e(this).append("<div class='overlay-dark'></div>"),e(this).hasClass("overlay-light")&&e(this).append("<div class='overlay-light'></div>")}),e(document).scroll(function(){var t=e(this).scrollTop();t>10?e("header.header").addClass("scrolled"):e("header.header").removeClass("scrolled")}),e(document).on("contextmenu",function(e){settings.previewProtection&&e.preventDefault()}),e("header.header .menu").click(function(t){e("nav.navigation").fadeToggle("slow"),e("nav.navigation .menu").css("margin-top",(windowHeight-e("nav.navigation .menu").height())/2),e("header.header .menu").toggleClass("close")}),e("section.home .discover").hover(function(t){e(this).removeClass("fadeInDownHalf"),e(this).removeClass("animated")}),e("section.home .slider").flexslider({animation:"fade",animationLoop:!0,animationSpeed:1500,controlNav:!0,directionNav:!0,easing:"easeOutBack",pauseOnHover:!1,selector:".slides > .slide",slideshow:!0}),e("section.work .albums li").click(function(){if(!e(this).hasClass("selected")){{e(this).text().toLowerCase()}e(this).addClass("selected"),e(this).siblings().removeClass("selected"),showPortfolio()}}),e("section.work .file").hover(function(t){e(this).removeClass("hover"),e(this).siblings().addClass("hover")},function(){e("section.work .file").removeClass("hover")}),e("section.blog .post").hover(function(t){e(this).siblings().addClass("hover")},function(){e("section.blog .post").removeClass("hover")}),e("section.blog .post .image, section.blog .post .cover").click(function(){e.magnificPopup.open({items:{src:e(this).parent().attr("data-url"),type:"ajax"},closeMarkup:"<button class='mfp-close'>close</button>"})}),e("section.article .social .facebook").click(function(){var t=e(location).attr("href");window.open("https://www.facebook.com/sharer/sharer.php?u="+t,"Share","resizable=yes,width=640, height=360")}),e("section.article .social .twitter").click(function(){var t=e(location).attr("href");window.open("https://twitter.com/home?status="+t,"Tweet","resizable=yes,width=640, height=360")})}),$(window).load(function(){adjustSizes(),showPortfolio(),playLoader(),playAnimations()}),$(window).resize(function(){adjustSizes()});var currentAlbum;